# 川﨑担当部分(主にgame)の日誌
## 11/21

* ディレクトリ作成．roulette, topicを追加した  
* ボタンからroulette, topicに飛べるようにした  
* loulette  
    * 細かいデザイン，UIを話し合いたい  
        * デフォルトの項目をグループメンバーにした方がよさそう
    * 新規項目を作っていくと同じような色の繰り返しになってしまうので色生成のアルゴリズム再考すべし  
* topic  
    * どういうレイアウトにするかは未定    
        * ライオンのごきげんようとかpicoloとか？
    * 背景の泡が一部表示されない

## 12/4
* topic
    * フリップするカードを作った．
    * クリックするとあらかじめ保存してあるものの中からランダムにテキストが表示され，もう一度クリックすると裏返る
    * 同じ話題が被って出ると，新しい話題が出るまで何回もクリックし続けないといけなくなるのでそれがないようにしたい．現在格闘中

## 12/13
* roulette
    * 細かい部分を調整した
    * 結果の下が最初だけ詰まっているのをなんとかしたい
    * 要素の追加はスタンバイ状態じゃないと行えないようにしたい．そんで黒色の要素じゃなくて初めから色を表示させたい
        * できた．
    * 削除ボタンが赤色の×ボタンとかでいい気がする．漢字いかつい
    * result modeの時は設定が変更できないので，変更できないアピール（例えば全体を薄い色にするとか）をしたい
        * できた
    * 要素を追加した時，名前をばらつかせたい
        * 初期表示はグループメンバーの名前にするとして，そのあとはどうしようかな

## 12/14
* roulette
    * 結果の下のスペースを調整した
    * ルーレットの項目にメンバーの名前を使いたいので将来的にonclickをjavascriptで定義する

## 12/15
* roulette
    * ルーレットの項目にメンバーの名前を使いたかったが難航中
        * firebaseの項目をimportしたかったら，roulette.htmlのsrcにtype="module"とすべき
        * だけどそうすると，import以降が読まれなくなってしまう
            * できた．[p5.jsのスコープの問題](https://qiita.com/youtoy/items/6f6522e2df781a200b39)だった
            * firebaseからデータを持ってくることができた．
    * chatGPTに聞いて，リストから表の値を持って来れるようにした
        * けどルーレットの図と結果が対応してないから今後調整すべき

## 12/22
* roulette
    * コードを以下のように変えるとメンバーが読み込まれたが，そうするとルーレットの描画がされない．ちなみに再び読み込むと描画される．

```javascript
document.addEventListener('DOMContentLoaded', function() {   
    let groupRef = ref_(database,'groups/' + groupId);
    get_(groupRef)
    .then((snapshot) => {
        let data = snapshot.val();
        let memberList = data["groupMember"];
        console.log("success");
        
        // データを取得後にテーブルを生成する
        let initialData = memberList.map(name => ({ name, ratio: 1 }));
        generateTable(initialData);
    })
    .catch((error) => {
        console.log("ID:" + groupId);
        console.error("データの読み取りに失敗しました", error);
    });
    });
```

## 12/23
* roulette
    * memberListが反映できた．リロード時にsetup関数とdraw関数も実行させるようにしたら解決した

# 12/25
* roulette
    * ルーレットのデザイン修正
    * ルーレットの針が赤色にできなくなっちゃった．このままでもいいけど
* topic
    * 履歴が重複しないように変更した
* リンクコピー機能を作った．iphone, Macの動作確認済

# 12/26
* これからやりたい事
    * rouletteの色生成のアルゴリズム
    * topicの話題編集機能
    * paypay決済機能
    * リンクコピー機能動作確認
    * LINEにリンクを共有する機能

# 12/27
* paypay決済機能
    * 個人間送金のAPIは基本なさそうで，ヒットしたものも[クレカの登録が必要だし大変そう](https://zenn.dev/rinda_1994/articles/c5ca9955e53f86)なのでパス
    * 仕方なくiphoneにPayPayが入っている場合，PayPayを開くボタンを実装した
    * 例外処理は未実装，未検証．Androidの場合もできるようにしたい
* topic
    * 話題編集機能を作った
    * はじめにデフォルトで設定してある話題が出てくる．内容の追加，削除，更新ができ，その都度カードに表示されるリストにも反映される仕組み
    * リロードすると初期状態に戻ってしまうのが多分不便なので改善したい
    * 項目を編集した後，見えない状態に変更できるようにもしたい
* LINE共有機能
    * 作った
    * Macでは動作しない．ipadは動作した
    * とりあえず画像を適当に挿入した